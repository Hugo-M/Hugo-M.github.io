---
title: 数值每三位加逗号
date: 2018-03-22 22:05:45
tags: JavaScript
---
编写一个 toThousands 函数实现如下功能
```
toThousands(23456.89) // '23,456.89'
```
### 方法一
循环使用`slice(-3)`获取每组数字。
```
function toThousands(number) {
  var arr = String(number).split('.');
  var num = arr[0], result = '';
  while (num.length > 3) {
    result = ',' + num.slice(-3) + result;
    num = num.slice(0, num.length -3);
  }
  if (num.length > 0) result = num + result;
  return arr[1] ? result + '.' + arr[1] : result
}
```

<!-- more -->
### 方法二
在头部补全`0`，然后使用正则匹配，最后去除开头的零。`padStart`是ES6的方法，你也可以使用其他方法代替。
```
function toThousands(number) {
  var arr = String(number).split('.');
  var num = arr[0];
  var len = Math.ceil(num.length / 3) * 3;
  var result = num.padStart(len, '0').match(/\d{3}/g).join(',').replace(/^0+/, '');  
  return arr[1] ? result + '.' + arr[1] : result;
}
```

### 方法三
传化为数组进行操作，然后再拼接。
```
function toThousands(number) {
  var arr = String(number).split('.');
  var result = [], counter = 0;
  var num = arr[0].split('');
  for (var i = num.length - 1; i >= 0; i--) {
    counter++;
    result.unshift(num[i]);
    if (!(counter % 3) && i != 0) result.unshift(',');
  }
  return arr[1] ? result.join('') + '.' + arr[1] : result.join('');
}
```

### 方法四
使用 charAt 获取数字。
```
function toThousands(number) {
  var arr = String(number).split('.');
  var num = arr[0], result = '', counter = 0;
  for (var i = num.length - 1; i >= 0; i--) {
    counter++;
    result = num.charAt(i) + result;
    if (!(counter % 3) && i != 0) result = ',' + result;
  }
  return arr[1] ? result + '.' + arr[1] : result;
}
```